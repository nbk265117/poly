<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipeline V10 - Botayo Documentation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
        }
        nav {
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        nav .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        nav .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        nav ul { display: flex; list-style: none; gap: 30px; }
        nav a { color: #fff; text-decoration: none; font-weight: 500; transition: color 0.3s; }
        nav a:hover { color: #00d4ff; }
        nav a.active { color: #00ff88; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .hero { text-align: center; padding: 60px 20px; }
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero p { color: #888; font-size: 1.1rem; }

        .section {
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .section.highlight {
            border: 2px solid #00ff88;
            background: rgba(0,255,136,0.03);
        }
        .section h2 {
            color: #00d4ff;
            font-size: 1.5rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .section h3 {
            color: #00ff88;
            font-size: 1.1rem;
            margin: 25px 0 15px 0;
        }
        .section p {
            color: #ccc;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .code-block {
            background: #0d1117;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .code-block code {
            color: #e6edf3;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre;
        }
        .code-block .comment { color: #8b949e; }
        .code-block .keyword { color: #ff7b72; }
        .code-block .string { color: #a5d6ff; }
        .code-block .number { color: #79c0ff; }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        .card {
            background: rgba(0,212,255,0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(0,212,255,0.2);
        }
        .card.green {
            background: rgba(0,255,136,0.05);
            border-color: rgba(0,255,136,0.3);
        }
        .card h4 {
            color: #00d4ff;
            margin-bottom: 10px;
        }
        .card.green h4 { color: #00ff88; }
        .card p { color: #888; font-size: 0.95rem; }

        .badge {
            display: inline-block;
            background: rgba(0,255,136,0.15);
            color: #00ff88;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin: 5px 5px 5px 0;
        }
        .badge.blue { background: rgba(0,212,255,0.15); color: #00d4ff; }
        .badge.yellow { background: rgba(255,215,0,0.15); color: #ffd700; }
        .badge.purple { background: rgba(168,85,247,0.15); color: #a855f7; }
        .badge.red { background: rgba(255,71,87,0.15); color: #ff4757; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        th {
            background: rgba(0,212,255,0.1);
            color: #00d4ff;
            font-weight: 600;
        }
        td { color: #ccc; }
        tr:hover { background: rgba(255,255,255,0.03); }

        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #00d4ff, #00ff88);
        }
        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            padding-left: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -34px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00d4ff;
            border: 3px solid #1a1a2e;
        }
        .timeline-item h4 {
            color: #fff;
            margin-bottom: 5px;
        }
        .timeline-item p {
            color: #888;
            font-size: 0.95rem;
        }

        .alert {
            background: rgba(255,215,0,0.1);
            border-left: 4px solid #ffd700;
            padding: 15px 20px;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
        }
        .alert p { color: #ffd700; margin: 0; }
        .alert.green {
            background: rgba(0,255,136,0.1);
            border-color: #00ff88;
        }
        .alert.green p { color: #00ff88; }

        .architecture-diagram {
            background: #0d1117;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid rgba(0,255,136,0.3);
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            line-height: 1.4;
            overflow-x: auto;
        }

        footer {
            text-align: center;
            padding: 40px;
            color: #666;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 60px;
        }

        @media (max-width: 768px) {
            .grid-2, .grid-4 { grid-template-columns: 1fr; }
            .section { padding: 25px; }
            .hero h1 { font-size: 1.8rem; }
            nav ul { gap: 15px; }
            .code-block { padding: 15px; }
            .code-block code { font-size: 0.8rem; }
        }
    </style>
</head>
<body>
    <link rel="stylesheet" href="nav.css">
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">Botayo</a>
            <div class="burger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Accueil</a></li>
                <li><a href="stats.html">Statistiques</a></li>
                <li><a href="strategy.html">Strategie</a></li>
                <li><a href="pipeline.html" class="active">Pipeline</a></li>
                <li><a href="growth.html">Croissance</a></li>
            </ul>
        </div>
    </nav>
    <script>
        function toggleMenu() {
            document.querySelector('.burger').classList.toggle('active');
            document.querySelector('.nav-links').classList.toggle('active');
        }
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                document.querySelector('.burger').classList.remove('active');
                document.querySelector('.nav-links').classList.remove('active');
            });
        });
    </script>

    <div class="hero">
        <h1>Pipeline V10 - Infrastructure</h1>
        <p>Architecture complete: Watchdog, Monitoring, Systemd, Cron, Alertes Telegram</p>
    </div>

    <div class="container">

        <!-- Architecture Overview -->
        <div class="section highlight">
            <h2>Architecture V10</h2>
            <p>Systeme de trading deploye sur VPS Ubuntu avec watchdog central gerant 3 bots independants.</p>

            <div class="architecture-diagram">
<pre style="color:#e6edf3; margin:0;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      <span style="color:#00ff88;">VPS Ubuntu (99.79.36.81)</span>                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  <span style="color:#00d4ff;">WATCHDOG V10</span> (systemd)                   â”‚  â”‚
â”‚  â”‚                   Check: 32 secondes                      â”‚  â”‚
â”‚  â”‚                   Auto-restart on crash                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â–¼                    â–¼                    â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ <span style="color:#f7931a;">Bot BTC</span>    â”‚      â”‚ <span style="color:#627eea;">Bot ETH</span>    â”‚      â”‚ <span style="color:#888;">Bot XRP</span>    â”‚        â”‚
â”‚  â”‚ 7 shares   â”‚      â”‚ 10 shares  â”‚      â”‚ 5 shares   â”‚        â”‚
â”‚  â”‚ ~$3.68     â”‚      â”‚ ~$5.25     â”‚      â”‚ ~$2.63     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     <span style="color:#ffd700;">CRON JOBS</span>                             â”‚  â”‚
â”‚  â”‚  â€¢ Heartbeat: toutes les heures a :02                    â”‚  â”‚
â”‚  â”‚  â€¢ Cleanup: tous les jours a 00:02                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span style="color:#a855f7;">Polymarket</span>      â”‚            â”‚   <span style="color:#00d4ff;">Telegram</span>      â”‚
â”‚  CLOB API       â”‚            â”‚   Alertes       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <span style="color:#ffd700;">Binance API</span>    â”‚
â”‚  HTF: 1H / 4H   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>

            <div class="grid-4" style="margin-top: 25px;">
                <div class="card green">
                    <h4>Watchdog V10</h4>
                    <p>Check toutes les 32s, auto-restart, max 5 restarts</p>
                </div>
                <div class="card">
                    <h4>3 Bots V10</h4>
                    <p>BTC (7), ETH (10), XRP (5) shares</p>
                </div>
                <div class="card">
                    <h4>Systemd</h4>
                    <p>Auto-start au boot, restart on failure</p>
                </div>
                <div class="card">
                    <h4>Telegram</h4>
                    <p>Trades, heartbeat, alertes crash</p>
                </div>
            </div>
        </div>

        <!-- Watchdog V10 -->
        <div class="section">
            <h2>Watchdog V10</h2>
            <p>Processus central qui supervise les 3 bots et assure leur disponibilite 24/7.</p>

            <h3>Configuration</h3>
            <table>
                <tr>
                    <th>Parametre</th>
                    <th>Valeur</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><span class="badge blue">CHECK_INTERVAL</span></td>
                    <td>32 secondes</td>
                    <td>Evite les :00, :15, :30, :45 (bougies 15min)</td>
                </tr>
                <tr>
                    <td><span class="badge yellow">MAX_RESTARTS</span></td>
                    <td>5</td>
                    <td>Alerte critique apres 5 crashes</td>
                </tr>
                <tr>
                    <td><span class="badge purple">RESTART_COOLDOWN</span></td>
                    <td>60 secondes</td>
                    <td>Attente avant nouveau restart</td>
                </tr>
            </table>

            <h3>Bots Geres</h3>
            <table>
                <tr>
                    <th>Bot</th>
                    <th>Script</th>
                    <th>Shares</th>
                    <th>Mise/Trade</th>
                </tr>
                <tr>
                    <td><span class="badge" style="background:#f7931a20;color:#f7931a;">BTC</span></td>
                    <td>bot_v10_btc.py</td>
                    <td>7</td>
                    <td>~$3.68</td>
                </tr>
                <tr>
                    <td><span class="badge" style="background:#627eea20;color:#627eea;">ETH</span></td>
                    <td>bot_v10_eth.py</td>
                    <td>10</td>
                    <td>~$5.25</td>
                </tr>
                <tr>
                    <td><span class="badge" style="background:#23292f20;color:#888;">XRP</span></td>
                    <td>bot_v10_xrp.py</td>
                    <td>5</td>
                    <td>~$2.63</td>
                </tr>
            </table>

            <h3>Code Source</h3>
            <div class="code-block">
<code><span class="comment"># watchdog_v10.py - Configuration</span>
BOTS = [
    {<span class="string">'name'</span>: <span class="string">'BTC'</span>, <span class="string">'script'</span>: <span class="string">'bot_v10_btc.py'</span>, <span class="string">'shares'</span>: <span class="number">7</span>},
    {<span class="string">'name'</span>: <span class="string">'ETH'</span>, <span class="string">'script'</span>: <span class="string">'bot_v10_eth.py'</span>, <span class="string">'shares'</span>: <span class="number">10</span>},
    {<span class="string">'name'</span>: <span class="string">'XRP'</span>, <span class="string">'script'</span>: <span class="string">'bot_v10_xrp.py'</span>, <span class="string">'shares'</span>: <span class="number">5</span>},
]

<span class="keyword">CHECK_INTERVAL</span> = <span class="number">32</span>  <span class="comment"># Evite :00, :15, :30, :45</span>
<span class="keyword">MAX_RESTARTS</span> = <span class="number">5</span>
<span class="keyword">RESTART_COOLDOWN</span> = <span class="number">60</span></code>
            </div>
        </div>

        <!-- Services Systemd -->
        <div class="section">
            <h2>Service Systemd</h2>
            <p>Le watchdog est configure comme service systemd pour demarrage automatique au boot.</p>

            <h3>watchdog-v10.service</h3>
            <div class="code-block">
<code><span class="comment"># /etc/systemd/system/watchdog-v10.service</span>
[Unit]
Description=Polymarket Watchdog V10 - BTC/ETH/XRP
After=network.target
Wants=network-online.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/poly
Environment=PATH=/home/ubuntu/poly/venv/bin:/usr/bin:/bin
ExecStart=/home/ubuntu/poly/venv/bin/python watchdog_v10.py <span class="keyword">--live --yes</span>
<span class="keyword">Restart=always</span>
<span class="keyword">RestartSec=30</span>
StandardOutput=append:/home/ubuntu/poly/logs/watchdog_v10.log
StandardError=append:/home/ubuntu/poly/logs/watchdog_v10.log

[Install]
WantedBy=multi-user.target</code>
            </div>

            <h3>startup-alert-v10.service</h3>
            <div class="code-block">
<code><span class="comment"># Envoie alerte Telegram au demarrage du VPS</span>
[Unit]
Description=Polymarket Startup Alert V10
After=network-online.target

[Service]
Type=oneshot
ExecStart=/bin/bash /home/ubuntu/poly/alert_startup_v10.sh

[Install]
WantedBy=multi-user.target</code>
            </div>

            <div class="alert green">
                <p><strong>Auto-Recovery:</strong> Si le watchdog crash, systemd le redemarre apres 30s. Le watchdog redemarre ensuite les bots.</p>
            </div>

            <h3>Commandes Systemd</h3>
            <div class="code-block">
<code><span class="comment"># Status du watchdog</span>
sudo systemctl status watchdog-v10

<span class="comment"># Redemarrer le watchdog (et tous les bots)</span>
sudo systemctl restart watchdog-v10

<span class="comment"># Logs en temps reel</span>
sudo journalctl -u watchdog-v10 -f

<span class="comment"># Verifier si enabled au boot</span>
sudo systemctl is-enabled watchdog-v10</code>
            </div>
        </div>

        <!-- Scripts de Monitoring -->
        <div class="section">
            <h2>Scripts de Monitoring V10</h2>

            <h3>1. heartbeat_v10.sh</h3>
            <p>Envoie un status complet a Telegram toutes les heures.</p>

            <div class="code-block">
<code><span class="comment">#!/bin/bash</span>
<span class="comment"># Cron: 2 * * * * (toutes les heures a :02)</span>

<span class="comment"># Verifier les bots V10</span>
for symbol in BTC ETH XRP; do
    if pgrep -f "bot_v10_${symbol,,}.py" > /dev/null; then
        BOTS_STATUS+="<span class="string">âœ… $symbol</span> "
    else
        BOTS_STATUS+="<span class="keyword">âŒ $symbol</span> "
    fi
done

MESSAGE="<span class="string">ğŸ’“ HEARTBEAT V10

ğŸ–¥ï¸ Status: ONLINE
â° $TIMESTAMP

Systeme:
â€¢ Uptime: $UPTIME
â€¢ RAM: $MEMORY
â€¢ Disque: $DISK

Bots V10 (3/3):
$BOTS_STATUS

âœ… Systeme operationnel!</span>"</code>
            </div>

            <h3>2. alert_startup_v10.sh</h3>
            <p>Notification au demarrage/redemarrage du VPS.</p>

            <div class="code-block">
<code><span class="comment"># Execute automatiquement au boot via systemd</span>

MESSAGE="<span class="keyword">ğŸ”„ VPS REDEMARRE - V10</span>

âš ï¸ Le VPS vient de demarrer

ğŸ¤– Bots V10 en demarrage:
  - BTC: 7 shares (~<span class="number">$3.68</span>)
  - ETH: 10 shares (~<span class="number">$5.25</span>)
  - XRP: 5 shares (~<span class="number">$2.63</span>)

ğŸ“Š Strategie V10:
  - RSI(7): 42/62
  - Stoch(5): 38/68
  - FTFC: 2.0"</code>
            </div>

            <h3>3. cleanup_logs.sh</h3>
            <p>Nettoyage des logs et cache.</p>

            <div class="code-block">
<code><span class="comment"># Cron: 2 0 * * * (tous les jours a 00:02)</span>

<span class="comment"># Tronquer les logs > 10MB (garder 1000 lignes)</span>
for logfile in $LOG_DIR/*.log; do
    SIZE=$(du -m "$logfile" | cut -f1)
    if [ "$SIZE" -gt 10 ]; then
        tail -1000 "$logfile" > "$logfile.tmp"
        mv "$logfile.tmp" "$logfile"
    fi
done

<span class="comment"># Supprimer logs > 3 jours</span>
find $LOG_DIR -name "*.log.*" -mtime +3 -delete

<span class="comment"># Nettoyer cache Python</span>
find $POLY_DIR -type d -name "__pycache__" -exec rm -rf {} \;</code>
            </div>
        </div>

        <!-- Cron Jobs -->
        <div class="section">
            <h2>Cron Jobs</h2>
            <p>Taches planifiees decalees a :02 pour eviter conflit avec les bougies 15min.</p>

            <div class="alert">
                <p><strong>Important:</strong> Les crons sont a :02 (pas :00) pour ne pas interferer avec l'analyse des bougies a :00, :15, :30, :45</p>
            </div>

            <table>
                <tr>
                    <th>Schedule</th>
                    <th>Script</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><span class="badge">2 * * * *</span></td>
                    <td>heartbeat_v10.sh</td>
                    <td>Status Telegram toutes les heures a :02</td>
                </tr>
                <tr>
                    <td><span class="badge purple">2 0 * * *</span></td>
                    <td>cleanup_logs.sh</td>
                    <td>Nettoyage quotidien a 00:02</td>
                </tr>
            </table>

            <h3>Timeline sans Conflit</h3>
            <div class="code-block">
<code><span class="comment"># Bougies 15min (analyse des bots)</span>
:00 â”€â”€â”€ Bougie + Analyse (~10-30s)
:02 â”€â”€â”€ <span class="string">Cron Heartbeat âœ“</span> (safe zone)
...
:15 â”€â”€â”€ Bougie + Analyse
:17 â”€â”€â”€ Watchdog check (32s interval)
...
:30 â”€â”€â”€ Bougie + Analyse
:32 â”€â”€â”€ Watchdog check
...
:45 â”€â”€â”€ Bougie + Analyse
:47 â”€â”€â”€ Watchdog check</code>
            </div>

            <h3>Configuration Crontab</h3>
            <div class="code-block">
<code><span class="comment"># Voir le crontab actuel</span>
crontab -l

<span class="comment"># Contenu:</span>
# Polymarket V10 Monitoring
# Decale a :02 pour eviter conflit avec bougies 15min

2 * * * * /home/ubuntu/poly/heartbeat_v10.sh >> /home/ubuntu/poly/logs/heartbeat.log 2>&1
2 0 * * * /home/ubuntu/poly/cleanup_logs.sh >> /home/ubuntu/poly/logs/cleanup.log 2>&1</code>
            </div>
        </div>

        <!-- Alertes Telegram -->
        <div class="section">
            <h2>Alertes Telegram</h2>
            <p>Notifications en temps reel pour tous les evenements importants.</p>

            <div class="grid-2">
                <div class="card green">
                    <h4>ğŸ’“ Heartbeat Horaire</h4>
                    <p>Status systeme + status des 3 bots V10. Envoye a :02 chaque heure.</p>
                </div>
                <div class="card">
                    <h4>ğŸ”„ VPS Redemarre</h4>
                    <p>Alerte au boot avec IP et configuration des bots.</p>
                </div>
                <div class="card" style="border-color:#ff4757;">
                    <h4 style="color:#ff4757;">âš ï¸ Bot Crash</h4>
                    <p>Notification si un bot tombe + confirmation du redemarrage auto.</p>
                </div>
                <div class="card">
                    <h4>ğŸ“ˆ Trades</h4>
                    <p>Chaque trade: direction (UP/DOWN), pair, shares, indicateurs.</p>
                </div>
            </div>

            <h3>Configuration .env</h3>
            <div class="code-block">
<code><span class="comment"># /home/ubuntu/poly/.env</span>
TELEGRAM_BOT_TOKEN=<span class="string">"8269823726:AAEItg..."</span>
TELEGRAM_CHAT_ID=<span class="string">"7205038378"</span>

POLYMARKET_PRIVATE_KEY=<span class="string">"0x..."</span>
POLYMARKET_CHAIN_ID=<span class="number">137</span></code>
            </div>
        </div>

        <!-- Workflow Trading -->
        <div class="section">
            <h2>Workflow de Trading V10</h2>
            <p>Cycle complet d'un trade avec triple confirmation RSI + Stoch + FTFC.</p>

            <div class="timeline">
                <div class="timeline-item">
                    <h4>1. Collecte des Donnees (Binance)</h4>
                    <p>15min: 100 bougies | 1H: 50 bougies | 4H: 50 bougies pour chaque paire.</p>
                </div>
                <div class="timeline-item">
                    <h4>2. Calcul RSI(7) + Stochastic(5)</h4>
                    <p>Indicateurs sur timeframe 15min.</p>
                </div>
                <div class="timeline-item">
                    <h4>3. Calcul FTFC Score</h4>
                    <p>Analyse 1H + 4H trends et RSI. Score de -3.0 a +3.0.</p>
                </div>
                <div class="timeline-item">
                    <h4>4. Triple Confirmation</h4>
                    <p><strong>UP:</strong> RSI &lt; 42 ET Stoch &lt; 38 ET FTFC &gt; -2.0<br>
                    <strong>DOWN:</strong> RSI &gt; 62 ET Stoch &gt; 68 ET FTFC &lt; 2.0</p>
                </div>
                <div class="timeline-item">
                    <h4>5. Execution (Polymarket CLOB)</h4>
                    <p>Achat de shares a 52.5c. BTC: 7 | ETH: 10 | XRP: 5</p>
                </div>
                <div class="timeline-item">
                    <h4>6. Resolution (15min)</h4>
                    <p>WIN: +$0.475/share | LOSS: -$0.525/share</p>
                </div>
            </div>
        </div>

        <!-- Structure des Fichiers -->
        <div class="section">
            <h2>Structure des Fichiers V10</h2>

            <div class="code-block">
<code>/home/ubuntu/poly/
â”œâ”€â”€ <span class="keyword">watchdog_v10.py</span>       <span class="comment"># Superviseur principal</span>
â”œâ”€â”€ <span class="keyword">bot_v10_btc.py</span>        <span class="comment"># Bot BTC (7 shares)</span>
â”œâ”€â”€ <span class="keyword">bot_v10_eth.py</span>        <span class="comment"># Bot ETH (10 shares)</span>
â”œâ”€â”€ <span class="keyword">bot_v10_xrp.py</span>        <span class="comment"># Bot XRP (5 shares)</span>
â”œâ”€â”€ .env                   <span class="comment"># Credentials</span>
â”‚
â”œâ”€â”€ <span class="string">heartbeat_v10.sh</span>      <span class="comment"># Status horaire (:02)</span>
â”œâ”€â”€ <span class="string">alert_startup_v10.sh</span>  <span class="comment"># Alerte au boot</span>
â”œâ”€â”€ <span class="string">cleanup_logs.sh</span>       <span class="comment"># Nettoyage (00:02)</span>
â”‚
â”œâ”€â”€ systemd/
â”‚   â”œâ”€â”€ <span class="keyword">watchdog-v10.service</span>
â”‚   â””â”€â”€ <span class="keyword">startup-alert-v10.service</span>
â”‚
â””â”€â”€ logs/
    â”œâ”€â”€ watchdog_v10.log
    â”œâ”€â”€ bot_v10_btc.log
    â”œâ”€â”€ bot_v10_eth.log
    â”œâ”€â”€ bot_v10_xrp.log
    â”œâ”€â”€ heartbeat.log
    â””â”€â”€ cleanup.log</code>
            </div>
        </div>

        <!-- Quick Reference -->
        <div class="section">
            <h2>Commandes Essentielles</h2>

            <div class="code-block">
<code><span class="comment"># Connexion SSH</span>
ssh -i ~/.ssh/key.pem ubuntu@99.79.36.81

<span class="comment"># Status watchdog + bots</span>
sudo systemctl status watchdog-v10
ps aux | grep bot_v10

<span class="comment"># Logs en temps reel</span>
tail -f /home/ubuntu/poly/logs/watchdog_v10.log
tail -f /home/ubuntu/poly/logs/bot_v10_*.log

<span class="comment"># Redemarrer tout</span>
sudo systemctl restart watchdog-v10

<span class="comment"># Lancer heartbeat manuellement</span>
/home/ubuntu/poly/heartbeat_v10.sh

<span class="comment"># Verifier crontab</span>
crontab -l</code>
            </div>
        </div>

    </div>

    <footer>
        <p>Botayo - Pipeline V10 (Watchdog + Systemd + Cron)</p>
        <p>Mis a jour le 31 Decembre 2025</p>
    </footer>
</body>
</html>
